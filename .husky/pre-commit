#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ” Running pre-commit checks..."

# 1. Run type checking
echo "ğŸ“ Type checking..."
pnpm type-check || {
  echo "âŒ Type checking failed. Please fix TypeScript errors."
  exit 1
}

# 2. Run linting with auto-fix
echo "ğŸ”§ Linting and auto-fixing..."
pnpm lint:fix || {
  echo "âŒ Linting failed. Please fix linting errors."
  exit 1
}

# 3. Run formatting
echo "ğŸ’… Formatting code..."
pnpm format || {
  echo "âŒ Formatting failed."
  exit 1
}

# 4. Run unit tests
echo "ğŸ§ª Running unit tests..."
pnpm test:unit || {
  echo "âŒ Unit tests failed. Please fix failing tests."
  exit 1
}

# 5. Build check
echo "ğŸ—ï¸ Build check..."
pnpm build || {
  echo "âŒ Build failed. Please fix build errors."
  exit 1
}

echo "âœ… All pre-commit checks passed!"
